<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de doador</title>
    <link rel="stylesheet" href="../../assets/css/style_M.css">
    <link rel="shortcut icon" href="../../assets/images/logo.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Lora:wght@400&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <!-- Barra de navegação do site -->
        <nav class="menu">
            <div class="logo">
                <img src="../../assets/images/logo.png" alt="Logo Doação de Sangue"> <!-- Logo do site -->
            </div>
            <ul class="nav-links">
                <li><a href="#">INÍCIO</a></li>
                <li><a href="#">DOE SANGUE</a></li>
                <li><a href="#">PRECISO DE DOAÇÃO</a></li>
                <li><a href="#">CAMPANHAS</a></li>
                <li><a href="#">DÚVIDAS</a></li>
                <li><a href="#">SOBRE NÓS</a></li>
            </ul>
            <div class="perfil">
                <!-- Link para a página de perfil -->
                <a href="../../modulos/perfil_doador/pagina_perfil.html">
                    <img src="../../assets/images/foto_perfil.png" alt="Perfil" class="perfil-icon"> <!-- Ícone do perfil -->
                </a>
            </div>                
        </nav>
    </header>

    <section class="hero">
        <!-- Seção inicial com chamada para ação e botão -->
        <div class="text-center">
            <h1>Seja o super-herói que o mundo precisa!</h1>
            <h1>Doe sangue e salve vidas.</h1>
            <a href="#cadastroDoador" class="btn-doe">Seja doador</a> <!-- Botão que leva para a seção de cadastro -->
        </div>
    </section>

    <section class="porque-doar">
        <!-- Seção explicando a importância de doar sangue -->
        <h2>POR QUE DOAR SANGUE?</h2><br>
        <div class="doar-sangue-content">
            <div class="imagem-campanha">
                <img src="../../assets/images/doe_sangue.png" alt="Doe Sangue"> <!-- Imagem com o tema de doação -->
                <a href="" class="btn-campanha">Campanhas</a> <!-- Botão para ver campanhas de doação -->
            </div>
            <div class="texto-motivos">
                <!-- Lista de motivos para doar sangue -->
                <p>1. É seguro, pois todo o material usado no procedimento é esterilizado e descartável, o que reduz qualquer chance de contaminação.</p><br>
                <p>2. Cada doação ajuda até quatro pessoas.</p><br>
                <p>3. A doação de sangue não oferece riscos de contaminação.</p><br>
                <p>4. O sangue doado é restabelecido rapidamente.</p><br>
                <p>5. O sangue doado é utilizado no tratamento de pessoas com doenças hematológicas variadas, como doença falciforme e talassemia...</p>
            </div>
        </div>
    </section>

    <section>
        <!-- Seção de cadastro de doador -->
        <section class="cadastro-doador" id="cadastroDoador">
            <h2>Cadastre-se e seja um(a) doador(a)</h2>
            <form id="formCadastro" method="POST" class="form-cadastro">
                <!-- Campos do formulário de cadastro de doador -->
                <label for="nome">Nome Completo</label>
                <input type="text" id="nome" name="nome" required>
        
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
        
                <label for="telefone">Telefone</label>
                <input type="tel" id="telefone" name="telefone" required>
        
                <label for="data-nascimento">Data de Nascimento</label>
                <input type="date" id="data-nascimento" name="data-nascimento" required>
        
                <label for="tipo-sanguineo">Tipo Sanguíneo</label>
                <select id="tipo-sanguineo" name="tipo-sanguineo" required>
                    <option value="">Selecione</option>
                    <!-- Opções de tipo sanguíneo -->
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
        
                <label for="estado">Estado</label>
                <input type="text" id="estado" name="estado" required>
        
                <label for="cidade">Cidade</label>
                <input type="text" id="cidade" name="cidade" required>
        
                <label for="onde-conheceu">Onde nos conheceu?</label>
                <select id="onde-conheceu" name="onde-conheceu" required>
                    <option value="">Selecione</option>
                    <!-- Opções para saber como a pessoa conheceu -->
                    <option value="internet">Internet</option>
                    <option value="tv">TV</option>
                    <option value="amigos">Amigos</option>
                    <option value="outros">Outros</option>
                </select>
        
                <label for="sexo">Sexo</label>
                <select id="sexo" name="sexo" required>
                    <option value="">Selecione</option>
                    <option value="masculino">Masculino</option>
                    <option value="feminino">Feminino</option>
                </select>

                <label>
                    <input type="checkbox" name="newsletter">
                    Desejo receber a newsletter <!-- Checkbox para assinar newsletter -->
                </label>
                <button id="btnCadastrar" class="btn-cadastrar">Cadastrar</button>
            </form>
            <div id="mensagem-confirmacao" class="mensagem-confirmacao"></div> <!-- Div para mensagem de confirmação -->
        </section>
        
    </section>

    <!-- Scripts para manipulação do formulário -->
    <script>
        document.getElementById("formCadastro").addEventListener("submit", function(event) {
            event.preventDefault(); // Impede o envio do formulário padrão
    
            // Coleta os dados do formulário
            const formData = {
                nome: document.getElementById("nome").value,
                email: document.getElementById("email").value,
                telefone: document.getElementById("telefone").value,
                dataNascimento: document.getElementById("data-nascimento").value,
                tipoSanguineo: document.getElementById("tipo-sanguineo").value,
                estado: document.getElementById("estado").value,
                cidade: document.getElementById("cidade").value,
                ondeConheceu: document.getElementById("onde-conheceu").value,
                sexo: document.getElementById("sexo").value,
                newsletter: document.querySelector("input[name=newsletter]").checked
            };
    
            // Envia os dados para o servidor JSON Server (ajuste a URL conforme necessário)
            fetch("http://localhost:3000/doadores", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(formData) // Envia os dados em formato JSON
            })
            .then(response => response.json()) // Lida com a resposta do servidor
            .then(data => {
                console.log("Cadastro realizado com sucesso!", data);
                window.location.href = "pagina_perfil.html"; // Redireciona para a página de perfil
            })
            .catch(error => {
                console.error("Erro:", error);
                alert("Erro ao cadastrar. Tente novamente mais tarde.");
            });
        });
    </script>    

</body>
</html>